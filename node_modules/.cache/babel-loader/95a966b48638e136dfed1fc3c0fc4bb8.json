{"ast":null,"code":"import _classCallCheck from \"/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _createForOfIteratorHelper from \"/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport * as React from \"react\";\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = function __defNormalProp(obj, key, value) {\n  return key in obj ? __defProp(obj, key, {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: value\n  }) : obj[key] = value;\n};\nvar __spreadValues = function __spreadValues(a, b) {\n  for (var prop in b || (b = {})) {\n    if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  if (__getOwnPropSymbols) {\n    var _iterator = _createForOfIteratorHelper(__getOwnPropSymbols(b)),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var prop = _step.value;\n        if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n  return a;\n};\nvar __spreadProps = function __spreadProps(a, b) {\n  return __defProps(a, __getOwnPropDescs(b));\n};\nfunction traverseFiber(fiber, ascending, selector) {\n  if (!fiber) return;\n  if (selector(fiber) === true) return fiber;\n  var child = ascending ? fiber.return : fiber.child;\n  while (child) {\n    var match = traverseFiber(child, ascending, selector);\n    if (match) return match;\n    child = child.sibling;\n  }\n}\nfunction wrapContext(context) {\n  try {\n    return Object.defineProperties(context, {\n      _currentRenderer: {\n        get: function get() {\n          return null;\n        },\n        set: function set() {}\n      },\n      _currentRenderer2: {\n        get: function get() {\n          return null;\n        },\n        set: function set() {}\n      }\n    });\n  } catch (_) {\n    return context;\n  }\n}\nvar FiberContext = wrapContext(React.createContext(null));\nvar FiberProvider = /*#__PURE__*/function (_React$Component) {\n  _inherits(FiberProvider, _React$Component);\n  var _super = _createSuper(FiberProvider);\n  function FiberProvider() {\n    _classCallCheck(this, FiberProvider);\n    return _super.apply(this, arguments);\n  }\n  _createClass(FiberProvider, [{\n    key: \"render\",\n    value: function render() {\n      return /* @__PURE__ */React.createElement(FiberContext.Provider, {\n        value: this._reactInternals\n      }, this.props.children);\n    }\n  }]);\n  return FiberProvider;\n}(React.Component);\nvar _React$__SECRET_INTER = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,\n  ReactCurrentOwner = _React$__SECRET_INTER.ReactCurrentOwner,\n  ReactCurrentDispatcher = _React$__SECRET_INTER.ReactCurrentDispatcher;\nfunction useFiber() {\n  var root = React.useContext(FiberContext);\n  if (!root) throw new Error(\"its-fine: useFiber must be called within a <FiberProvider />!\");\n  var id = React.useId();\n  var fiber = React.useMemo(function () {\n    var _a;\n    return (_a = ReactCurrentOwner.current) != null ? _a : traverseFiber(root, false, function (node) {\n      var state = node.memoizedState;\n      while (state) {\n        if (state.memoizedState === id) return true;\n        state = state.next;\n      }\n    });\n  }, [root, id]);\n  return fiber;\n}\nfunction useContainer() {\n  var fiber = useFiber();\n  var root = React.useMemo(function () {\n    return traverseFiber(fiber, true, function (node) {\n      var _a;\n      return ((_a = node.stateNode) == null ? void 0 : _a.containerInfo) != null;\n    });\n  }, [fiber]);\n  return root == null ? void 0 : root.stateNode.containerInfo;\n}\nfunction useNearestChild(type) {\n  var fiber = useFiber();\n  var childRef = React.useRef();\n  React.useLayoutEffect(function () {\n    var _a;\n    childRef.current = (_a = traverseFiber(fiber, false, function (node) {\n      return typeof node.type === \"string\" && (type === void 0 || node.type === type);\n    })) == null ? void 0 : _a.stateNode;\n  }, [fiber]);\n  return childRef;\n}\nfunction useNearestParent(type) {\n  var fiber = useFiber();\n  var parentRef = React.useRef();\n  React.useLayoutEffect(function () {\n    var _a;\n    parentRef.current = (_a = traverseFiber(fiber, true, function (node) {\n      return typeof node.type === \"string\" && (type === void 0 || node.type === type);\n    })) == null ? void 0 : _a.stateNode;\n  }, [fiber]);\n  return parentRef;\n}\nvar contexts = [];\nvar values = /* @__PURE__ */new WeakMap();\nfunction useContextBridge() {\n  var _a;\n  var fiber = useFiber();\n  contexts.splice(0, contexts.length);\n  traverseFiber(fiber, true, function (node) {\n    var _a2;\n    var context = (_a2 = node.type) == null ? void 0 : _a2._context;\n    if (context && context !== FiberContext) contexts.push(wrapContext(context));\n  });\n  var _iterator2 = _createForOfIteratorHelper(contexts),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var context = _step2.value;\n      var value = (_a = ReactCurrentDispatcher.current) == null ? void 0 : _a.readContext(context);\n      values.set(context, value);\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  return React.useMemo(function () {\n    return contexts.reduce(function (Prev, context) {\n      return function (props) {\n        return /* @__PURE__ */React.createElement(Prev, null, /* @__PURE__ */React.createElement(context.Provider, __spreadProps(__spreadValues({}, props), {\n          value: values.get(context)\n        })));\n      };\n    }, function (props) {\n      return /* @__PURE__ */React.createElement(FiberProvider, __spreadValues({}, props));\n    });\n  }, []);\n}\nexport { FiberProvider, traverseFiber, useContainer, useContextBridge, useFiber, useNearestChild, useNearestParent };","map":{"version":3,"sources":["../src/index.tsx"],"names":["_a"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nfunction traverseFiber(fiber, ascending, selector) {\n  if (!fiber)\n    return;\n  if (selector(fiber) === true)\n    return fiber;\n  let child = ascending ? fiber.return : fiber.child;\n  while (child) {\n    const match = traverseFiber(child, ascending, selector);\n    if (match)\n      return match;\n    child = child.sibling;\n  }\n}\nfunction wrapContext(context) {\n  try {\n    return Object.defineProperties(context, {\n      _currentRenderer: {\n        get() {\n          return null;\n        },\n        set() {\n        }\n      },\n      _currentRenderer2: {\n        get() {\n          return null;\n        },\n        set() {\n        }\n      }\n    });\n  } catch (_) {\n    return context;\n  }\n}\nconst FiberContext = wrapContext(React.createContext(null));\nclass FiberProvider extends React.Component {\n  render() {\n    return /* @__PURE__ */ React.createElement(FiberContext.Provider, {\n      value: this._reactInternals\n    }, this.props.children);\n  }\n}\nconst { ReactCurrentOwner, ReactCurrentDispatcher } = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\nfunction useFiber() {\n  const root = React.useContext(FiberContext);\n  if (!root)\n    throw new Error(\"its-fine: useFiber must be called within a <FiberProvider />!\");\n  const id = React.useId();\n  const fiber = React.useMemo(\n    () => {\n      var _a;\n      return (_a = ReactCurrentOwner.current) != null ? _a : traverseFiber(root, false, (node) => {\n        let state = node.memoizedState;\n        while (state) {\n          if (state.memoizedState === id)\n            return true;\n          state = state.next;\n        }\n      });\n    },\n    [root, id]\n  );\n  return fiber;\n}\nfunction useContainer() {\n  const fiber = useFiber();\n  const root = React.useMemo(\n    () => traverseFiber(fiber, true, (node) => {\n      var _a;\n      return ((_a = node.stateNode) == null ? void 0 : _a.containerInfo) != null;\n    }),\n    [fiber]\n  );\n  return root == null ? void 0 : root.stateNode.containerInfo;\n}\nfunction useNearestChild(type) {\n  const fiber = useFiber();\n  const childRef = React.useRef();\n  React.useLayoutEffect(() => {\n    var _a;\n    childRef.current = (_a = traverseFiber(\n      fiber,\n      false,\n      (node) => typeof node.type === \"string\" && (type === void 0 || node.type === type)\n    )) == null ? void 0 : _a.stateNode;\n  }, [fiber]);\n  return childRef;\n}\nfunction useNearestParent(type) {\n  const fiber = useFiber();\n  const parentRef = React.useRef();\n  React.useLayoutEffect(() => {\n    var _a;\n    parentRef.current = (_a = traverseFiber(\n      fiber,\n      true,\n      (node) => typeof node.type === \"string\" && (type === void 0 || node.type === type)\n    )) == null ? void 0 : _a.stateNode;\n  }, [fiber]);\n  return parentRef;\n}\nconst contexts = [];\nconst values = /* @__PURE__ */ new WeakMap();\nfunction useContextBridge() {\n  var _a;\n  const fiber = useFiber();\n  contexts.splice(0, contexts.length);\n  traverseFiber(fiber, true, (node) => {\n    var _a2;\n    const context = (_a2 = node.type) == null ? void 0 : _a2._context;\n    if (context && context !== FiberContext)\n      contexts.push(wrapContext(context));\n  });\n  for (const context of contexts) {\n    const value = (_a = ReactCurrentDispatcher.current) == null ? void 0 : _a.readContext(context);\n    values.set(context, value);\n  }\n  return React.useMemo(\n    () => contexts.reduce(\n      (Prev, context) => (props) => /* @__PURE__ */ React.createElement(Prev, null, /* @__PURE__ */ React.createElement(context.Provider, __spreadProps(__spreadValues({}, props), {\n        value: values.get(context)\n      }))),\n      (props) => /* @__PURE__ */ React.createElement(FiberProvider, __spreadValues({}, props))\n    ),\n    []\n  );\n}\nexport {\n  FiberProvider,\n  traverseFiber,\n  useContainer,\n  useContextBridge,\n  useFiber,\n  useNearestChild,\n  useNearestParent\n};\n//# sourceMappingURL=index.js.map\n"]},"metadata":{},"sourceType":"module"}