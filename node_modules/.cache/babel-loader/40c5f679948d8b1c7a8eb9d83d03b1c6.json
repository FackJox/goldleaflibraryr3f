{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.genDts = void 0;\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar uniq_1 = __importDefault(require(\"lodash/uniq\"));\nvar upperFirst_1 = __importDefault(require(\"lodash/upperFirst\"));\nfunction genDts(model, options) {\n  var contentParts = [];\n  contentParts = contentParts.concat(\"import type { CstNode, ICstVisitor, IToken } from \\\"chevrotain\\\";\");\n  contentParts = contentParts.concat((0, flatten_1.default)((0, map_1.default)(model, function (node) {\n    return genCstNodeTypes(node);\n  })));\n  if (options.includeVisitorInterface) {\n    contentParts = contentParts.concat(genVisitor(options.visitorInterfaceName, model));\n  }\n  return contentParts.join(\"\\n\\n\") + \"\\n\";\n}\nexports.genDts = genDts;\nfunction genCstNodeTypes(node) {\n  var nodeCstInterface = genNodeInterface(node);\n  var nodeChildrenInterface = genNodeChildrenType(node);\n  return [nodeCstInterface, nodeChildrenInterface];\n}\nfunction genNodeInterface(node) {\n  var nodeInterfaceName = getNodeInterfaceName(node.name);\n  var childrenTypeName = getNodeChildrenTypeName(node.name);\n  return \"export interface \".concat(nodeInterfaceName, \" extends CstNode {\\n  name: \\\"\").concat(node.name, \"\\\";\\n  children: \").concat(childrenTypeName, \";\\n}\");\n}\nfunction genNodeChildrenType(node) {\n  var typeName = getNodeChildrenTypeName(node.name);\n  return \"export type \".concat(typeName, \" = {\\n  \").concat((0, map_1.default)(node.properties, function (property) {\n    return genChildProperty(property);\n  }).join(\"\\n  \"), \"\\n};\");\n}\nfunction genChildProperty(prop) {\n  var typeName = buildTypeString(prop.type);\n  return \"\".concat(prop.name).concat(prop.optional ? \"?\" : \"\", \": \").concat(typeName, \"[];\");\n}\nfunction genVisitor(name, nodes) {\n  return \"export interface \".concat(name, \"<IN, OUT> extends ICstVisitor<IN, OUT> {\\n  \").concat((0, map_1.default)(nodes, function (node) {\n    return genVisitorFunction(node);\n  }).join(\"\\n  \"), \"\\n}\");\n}\nfunction genVisitorFunction(node) {\n  var childrenTypeName = getNodeChildrenTypeName(node.name);\n  return \"\".concat(node.name, \"(children: \").concat(childrenTypeName, \", param?: IN): OUT;\");\n}\nfunction buildTypeString(type) {\n  if ((0, isArray_1.default)(type)) {\n    var typeNames = (0, uniq_1.default)((0, map_1.default)(type, function (t) {\n      return getTypeString(t);\n    }));\n    var typeString = (0, reduce_1.default)(typeNames, function (sum, t) {\n      return sum + \" | \" + t;\n    });\n    return \"(\" + typeString + \")\";\n  } else {\n    return getTypeString(type);\n  }\n}\nfunction getTypeString(type) {\n  if (type.kind === \"token\") {\n    return \"IToken\";\n  }\n  return getNodeInterfaceName(type.name);\n}\nfunction getNodeInterfaceName(ruleName) {\n  return (0, upperFirst_1.default)(ruleName) + \"CstNode\";\n}\nfunction getNodeChildrenTypeName(ruleName) {\n  return (0, upperFirst_1.default)(ruleName) + \"CstChildren\";\n}","map":{"version":3,"sources":["../../src/generate.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.genDts = void 0;\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar uniq_1 = __importDefault(require(\"lodash/uniq\"));\nvar upperFirst_1 = __importDefault(require(\"lodash/upperFirst\"));\nfunction genDts(model, options) {\n    var contentParts = [];\n    contentParts = contentParts.concat(\"import type { CstNode, ICstVisitor, IToken } from \\\"chevrotain\\\";\");\n    contentParts = contentParts.concat((0, flatten_1.default)((0, map_1.default)(model, function (node) { return genCstNodeTypes(node); })));\n    if (options.includeVisitorInterface) {\n        contentParts = contentParts.concat(genVisitor(options.visitorInterfaceName, model));\n    }\n    return contentParts.join(\"\\n\\n\") + \"\\n\";\n}\nexports.genDts = genDts;\nfunction genCstNodeTypes(node) {\n    var nodeCstInterface = genNodeInterface(node);\n    var nodeChildrenInterface = genNodeChildrenType(node);\n    return [nodeCstInterface, nodeChildrenInterface];\n}\nfunction genNodeInterface(node) {\n    var nodeInterfaceName = getNodeInterfaceName(node.name);\n    var childrenTypeName = getNodeChildrenTypeName(node.name);\n    return \"export interface \".concat(nodeInterfaceName, \" extends CstNode {\\n  name: \\\"\").concat(node.name, \"\\\";\\n  children: \").concat(childrenTypeName, \";\\n}\");\n}\nfunction genNodeChildrenType(node) {\n    var typeName = getNodeChildrenTypeName(node.name);\n    return \"export type \".concat(typeName, \" = {\\n  \").concat((0, map_1.default)(node.properties, function (property) { return genChildProperty(property); }).join(\"\\n  \"), \"\\n};\");\n}\nfunction genChildProperty(prop) {\n    var typeName = buildTypeString(prop.type);\n    return \"\".concat(prop.name).concat(prop.optional ? \"?\" : \"\", \": \").concat(typeName, \"[];\");\n}\nfunction genVisitor(name, nodes) {\n    return \"export interface \".concat(name, \"<IN, OUT> extends ICstVisitor<IN, OUT> {\\n  \").concat((0, map_1.default)(nodes, function (node) { return genVisitorFunction(node); }).join(\"\\n  \"), \"\\n}\");\n}\nfunction genVisitorFunction(node) {\n    var childrenTypeName = getNodeChildrenTypeName(node.name);\n    return \"\".concat(node.name, \"(children: \").concat(childrenTypeName, \", param?: IN): OUT;\");\n}\nfunction buildTypeString(type) {\n    if ((0, isArray_1.default)(type)) {\n        var typeNames = (0, uniq_1.default)((0, map_1.default)(type, function (t) { return getTypeString(t); }));\n        var typeString = (0, reduce_1.default)(typeNames, function (sum, t) { return sum + \" | \" + t; });\n        return \"(\" + typeString + \")\";\n    }\n    else {\n        return getTypeString(type);\n    }\n}\nfunction getTypeString(type) {\n    if (type.kind === \"token\") {\n        return \"IToken\";\n    }\n    return getNodeInterfaceName(type.name);\n}\nfunction getNodeInterfaceName(ruleName) {\n    return (0, upperFirst_1.default)(ruleName) + \"CstNode\";\n}\nfunction getNodeChildrenTypeName(ruleName) {\n    return (0, upperFirst_1.default)(ruleName) + \"CstChildren\";\n}\n//# sourceMappingURL=generate.js.map"]},"metadata":{},"sourceType":"script"}