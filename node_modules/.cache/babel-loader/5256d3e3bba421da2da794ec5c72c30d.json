{"ast":null,"code":"import _objectSpread from \"/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nvar _jsxFileName = \"/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/src/components/FPSControls.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _this = this,\n  _s3 = $RefreshSig$();\n/**\n * Based on https://codepen.io/ogames/pen/rNmYpdo\n * - refactored to use fiber + drei semantics and compatible with @react-three/fiber\n * - added keyboard listener\n * - adjustment for fps\n */\n\nimport { OrbitControls, PerspectiveCamera } from \"@react-three/drei\";\nimport { useFrame } from \"@react-three/fiber\";\nimport React, { useCallback, useEffect, useRef, useState, useLayoutEffect } from \"react\";\nimport { Vector3 } from \"three\";\nimport nipplejs from \"nipplejs\";\nimport * as THREE from 'three';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar fwdValue = 0;\nvar bkdValue = 0;\nvar rgtValue = 0;\nvar lftValue = 0;\nvar joyManager;\nvar tempVector = new Vector3();\nvar upVector = new Vector3(0, 1, 0);\nvar NIPPLEJS_OPTIONS = {\n  zone: document.getElementById(\"joystickWrapper1\"),\n  size: 120,\n  maxNumberOfNipples: 1,\n  mode: \"static\",\n  restJoystick: true,\n  shape: \"circle\",\n  position: {\n    top: \"60px\",\n    left: \"60px\"\n  },\n  dynamicPage: false\n};\nvar handleMove = function handleMove(evt, data) {\n  var forward = data.vector.y;\n  var turn = data.vector.x;\n  if (forward > 0) {\n    fwdValue = Math.abs(forward);\n    bkdValue = 0;\n  } else if (forward < 0) {\n    fwdValue = 0;\n    bkdValue = Math.abs(forward);\n  }\n  if (turn > 0) {\n    lftValue = 0;\n    rgtValue = Math.abs(turn);\n  } else if (turn < 0) {\n    lftValue = Math.abs(turn);\n    rgtValue = 0;\n  }\n};\nfunction useKeyboard(_ref) {\n  _s();\n  var enableKeyboard = _ref.enableKeyboard;\n  var onKeyDown = function onKeyDown(event) {\n    switch (event.code) {\n      case \"ArrowUp\":\n      case \"KeyW\":\n        handleMove({}, {\n          vector: {\n            y: 1\n          }\n        });\n        break;\n      case \"ArrowLeft\":\n      case \"KeyA\":\n        handleMove({}, {\n          vector: {\n            x: -1\n          }\n        });\n        break;\n      case \"ArrowDown\":\n      case \"KeyS\":\n        handleMove({}, {\n          vector: {\n            y: -1\n          }\n        });\n        break;\n      case \"ArrowRight\":\n      case \"KeyD\":\n        handleMove({}, {\n          vector: {\n            x: 1\n          }\n        });\n        break;\n      default:\n        break;\n    }\n  };\n  var onKeyUp = function onKeyUp(event) {\n    switch (event.code) {\n      case \"ArrowUp\":\n      case \"KeyW\":\n        fwdValue = 0;\n        break;\n      case \"ArrowLeft\":\n      case \"KeyA\":\n        lftValue = 0;\n        break;\n      case \"ArrowDown\":\n      case \"KeyS\":\n        bkdValue = 0;\n        break;\n      case \"ArrowRight\":\n      case \"KeyD\":\n        rgtValue = 0;\n        break;\n      default:\n        break;\n    }\n  };\n  useEffect(function () {\n    if (enableKeyboard) {\n      document.addEventListener(\"keydown\", onKeyDown);\n      document.addEventListener(\"keyup\", onKeyUp);\n    }\n    return function () {\n      document.removeEventListener(\"keydown\", onKeyDown);\n      document.removeEventListener(\"keyup\", onKeyUp);\n    };\n  }, [enableKeyboard]);\n}\n_s(useKeyboard, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nfunction useJoystick(_ref2) {\n  _s2();\n  var enableJoystick = _ref2.enableJoystick;\n  var handleEnd = function handleEnd() {\n    bkdValue = 0;\n    fwdValue = 0;\n    lftValue = 0;\n    rgtValue = 0;\n  };\n  useEffect(function () {\n    if (!joyManager && enableJoystick) {\n      joyManager = nipplejs.create(NIPPLEJS_OPTIONS);\n      joyManager[\"0\"].on(\"move\", handleMove);\n      joyManager[\"0\"].on(\"end\", handleEnd);\n    }\n    return function () {\n      if (joyManager) {\n        joyManager[\"0\"].off(\"move\", handleMove);\n        joyManager[\"0\"].off(\"end\", handleEnd);\n      }\n    };\n  }, [enableJoystick]);\n}\n_s2(useJoystick, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nvar FPSControls = function FPSControls(_ref3) {\n  _s3();\n  var enableJoystick = _ref3.enableJoystick,\n    enableKeyboard = _ref3.enableKeyboard,\n    _ref3$orbitProps = _ref3.orbitProps,\n    orbitProps = _ref3$orbitProps === void 0 ? {} : _ref3$orbitProps,\n    _ref3$camProps = _ref3.camProps,\n    camProps = _ref3$camProps === void 0 ? {} : _ref3$camProps,\n    _ref3$mult = _ref3.mult,\n    mult = _ref3$mult === void 0 ? 0.1 : _ref3$mult;\n  var orbitRef = useRef();\n  var camRef = useRef();\n  var meshRef = useRef();\n  var updatePlayer = useCallback(function () {\n    var mesh = meshRef.current;\n    var controls = orbitRef.current;\n    var camera = camRef.current;\n\n    // move the player\n    var angle = controls.getAzimuthalAngle();\n    if (fwdValue > 0) {\n      tempVector.set(0, 0, -fwdValue).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(tempVector, mult);\n    }\n    if (bkdValue > 0) {\n      tempVector.set(0, 0, bkdValue).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(tempVector, mult);\n    }\n    if (lftValue > 0) {\n      tempVector.set(-lftValue, 0, 0).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(tempVector, mult);\n    }\n    if (rgtValue > 0) {\n      tempVector.set(rgtValue, 0, 0).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(tempVector, mult);\n    }\n    mesh.updateMatrixWorld();\n    var meshPosPost = mesh.position;\n\n    // reposition camera\n    camera.position.sub(controls.target);\n    controls.target.copy(mesh.position);\n    camera.position.add(mesh.position);\n  }, [meshRef, orbitRef, camRef, mult]);\n  useFrame(function (state) {\n    updatePlayer();\n  });\n  useJoystick({\n    enableJoystick: enableJoystick\n  });\n  useKeyboard({\n    enableKeyboard: enableKeyboard\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(OrbitControls, _objectSpread(_objectSpread({\n      autoRotate: false,\n      enableDamping: true,\n      enableZoom: false,\n      enablePan: false,\n      autoRotateSpeed: 0,\n      rotateSpeed: 0.4,\n      dampingFactor: 0.05\n    }, orbitProps), {}, {\n      ref: orbitRef\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 8\n    }, _this), /*#__PURE__*/_jsxDEV(PerspectiveCamera, _objectSpread(_objectSpread({}, camProps), {}, {\n      ref: camRef\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 8\n    }, _this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      position: orbitProps.target || [0, 0, 0],\n      visible: true,\n      ref: meshRef,\n      children: [/*#__PURE__*/_jsxDEV(\"boxGeometry\", {\n        args: [2, 2, 2]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 10\n      }, _this), /*#__PURE__*/_jsxDEV(\"meshBasicMaterial\", {\n        color: \"mediumpurple\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 10\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 8\n    }, _this)]\n  }, void 0, true);\n};\n_s3(FPSControls, \"hUuSd9GFH4AALM3vcxSPOm5du3g=\", false, function () {\n  return [useFrame, useJoystick, useKeyboard];\n});\n_c = FPSControls;\nexport default FPSControls;\nvar _c;\n$RefreshReg$(_c, \"FPSControls\");","map":{"version":3,"names":["OrbitControls","PerspectiveCamera","useFrame","React","useCallback","useEffect","useRef","useState","useLayoutEffect","Vector3","nipplejs","THREE","fwdValue","bkdValue","rgtValue","lftValue","joyManager","tempVector","upVector","NIPPLEJS_OPTIONS","zone","document","getElementById","size","maxNumberOfNipples","mode","restJoystick","shape","position","top","left","dynamicPage","handleMove","evt","data","forward","vector","y","turn","x","Math","abs","useKeyboard","enableKeyboard","onKeyDown","event","code","onKeyUp","addEventListener","removeEventListener","useJoystick","enableJoystick","handleEnd","create","on","off","FPSControls","orbitProps","camProps","mult","orbitRef","camRef","meshRef","updatePlayer","mesh","current","controls","camera","angle","getAzimuthalAngle","set","applyAxisAngle","addScaledVector","updateMatrixWorld","meshPosPost","sub","target","copy","add","state"],"sources":["/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/src/components/FPSControls.jsx"],"sourcesContent":["/**\n * Based on https://codepen.io/ogames/pen/rNmYpdo\n * - refactored to use fiber + drei semantics and compatible with @react-three/fiber\n * - added keyboard listener\n * - adjustment for fps\n */\n\n import { OrbitControls, PerspectiveCamera } from \"@react-three/drei\";\n import { useFrame } from \"@react-three/fiber\";\n import React, { useCallback, useEffect, useRef, useState, useLayoutEffect } from \"react\";\n import { Vector3 } from \"three\";\n import nipplejs from \"nipplejs\";\n import * as THREE from 'three'\n\n let fwdValue = 0;\n let bkdValue = 0;\n let rgtValue = 0;\n let lftValue = 0;\n let joyManager;\n const tempVector = new Vector3();\n const upVector = new Vector3(0, 1, 0);\n\n\n\n const NIPPLEJS_OPTIONS = {\n   zone: document.getElementById(\"joystickWrapper1\"),\n   size: 120,\n   maxNumberOfNipples: 1,\n   mode: \"static\",\n   restJoystick: true,\n   shape: \"circle\",\n   position: { top: \"60px\", left: \"60px\" },\n   dynamicPage: false\n };\n\n const handleMove = (evt, data) => {\n   const forward = data.vector.y;\n   const turn = data.vector.x;\n\n\n if (forward > 0) {\n   fwdValue = Math.abs(forward);\n   bkdValue = 0;\n } else if (forward < 0) {\n   fwdValue = 0;\n   bkdValue = Math.abs(forward);\n }\n\n if (turn > 0) {\n   lftValue = 0;\n   rgtValue = Math.abs(turn);\n } else if (turn < 0) {\n   lftValue = Math.abs(turn);\n   rgtValue = 0;\n }\n };\n\n\n function useKeyboard({ enableKeyboard }) {\n   const onKeyDown = (event) => {\n     switch (event.code) {\n       case \"ArrowUp\":\n       case \"KeyW\":\n         handleMove({}, { vector: { y: 1 } });\n         break;\n\n       case \"ArrowLeft\":\n       case \"KeyA\":\n         handleMove({}, { vector: { x: -1 } });\n         break;\n\n       case \"ArrowDown\":\n       case \"KeyS\":\n         handleMove({}, { vector: { y: -1 } });\n         break;\n\n       case \"ArrowRight\":\n       case \"KeyD\":\n         handleMove({}, { vector: { x: 1 } });\n         break;\n       default:\n         break;\n     }\n   };\n\n   const onKeyUp = (event) => {\n     switch (event.code) {\n       case \"ArrowUp\":\n       case \"KeyW\":\n         fwdValue = 0;\n         break;\n\n       case \"ArrowLeft\":\n       case \"KeyA\":\n         lftValue = 0;\n         break;\n\n       case \"ArrowDown\":\n       case \"KeyS\":\n         bkdValue = 0;\n         break;\n\n       case \"ArrowRight\":\n       case \"KeyD\":\n         rgtValue = 0;\n         break;\n       default:\n         break;\n     }\n   };\n\n   useEffect(() => {\n     if (enableKeyboard) {\n       document.addEventListener(\"keydown\", onKeyDown);\n       document.addEventListener(\"keyup\", onKeyUp);\n     }\n\n     return () => {\n       document.removeEventListener(\"keydown\", onKeyDown);\n       document.removeEventListener(\"keyup\", onKeyUp);\n     };\n   }, [enableKeyboard]);\n }\n\n function useJoystick({ enableJoystick }) {\n   const handleEnd = () => {\n     bkdValue = 0;\n     fwdValue = 0;\n     lftValue = 0;\n     rgtValue = 0;\n   };\n\n   useEffect(() => {\n     if (!joyManager && enableJoystick) {\n       joyManager = nipplejs.create(NIPPLEJS_OPTIONS);\n       joyManager[\"0\"].on(\"move\", handleMove);\n       joyManager[\"0\"].on(\"end\", handleEnd);\n     }\n\n     return () => {\n       if (joyManager) {\n         joyManager[\"0\"].off(\"move\", handleMove);\n         joyManager[\"0\"].off(\"end\", handleEnd);\n       }\n     };\n   }, [enableJoystick]);\n }\n\n\n const FPSControls = ({\n   enableJoystick,\n   enableKeyboard,\n   orbitProps = {},\n   camProps = {},\n   mult = 0.1\n }) => {\n   const orbitRef = useRef();\n   const camRef = useRef();\n   const meshRef = useRef();\n\n   const updatePlayer = useCallback(() => {\n     const mesh = meshRef.current;\n     const controls = orbitRef.current;\n     const camera = camRef.current;\n\n     // move the player\n     const angle = controls.getAzimuthalAngle();\n\n\n     if (fwdValue > 0) {\n       tempVector.set(0, 0, -fwdValue).applyAxisAngle(upVector, angle);\n       mesh.position.addScaledVector(tempVector, mult);\n     }\n\n     if (bkdValue > 0) {\n       tempVector.set(0, 0, bkdValue).applyAxisAngle(upVector, angle);\n       mesh.position.addScaledVector(tempVector, mult);\n     }\n\n     if (lftValue > 0) {\n       tempVector.set(-lftValue, 0, 0).applyAxisAngle(upVector, angle);\n       mesh.position.addScaledVector(tempVector, mult);\n     }\n\n     if (rgtValue > 0) {\n       tempVector.set(rgtValue, 0, 0).applyAxisAngle(upVector, angle);\n       mesh.position.addScaledVector(tempVector, mult);\n\n     }\n\n     mesh.updateMatrixWorld();\n     let meshPosPost = mesh.position\n\n     // reposition camera\n     camera.position.sub(controls.target);\n     controls.target.copy(mesh.position);\n     camera.position.add(mesh.position);\n\n\n   }, [meshRef, orbitRef, camRef, mult]);\n\n   useFrame((state) => {\n     updatePlayer();\n\n   });\n\n   useJoystick({ enableJoystick });\n   useKeyboard({ enableKeyboard });\n\n\n\n   return (\n     <>\n       <OrbitControls\n         autoRotate={false}\n         enableDamping={true}\n         enableZoom={false}\n         enablePan={false}\n         autoRotateSpeed={0}\n         rotateSpeed={0.4}\n         dampingFactor={0.05}\n         {...orbitProps}\n         ref={orbitRef}\n       />\n       <PerspectiveCamera {...camProps} ref={camRef} />\n\n\n\n\n\n       <mesh\n         position={orbitProps.target || [0, 0, 0]}\n         visible={true}\n         ref={meshRef}\n       >\n         {/* <CuboidCollider args={[2, 1, 2]} /> */}\n         <boxGeometry args={[2, 2, 2]}/>\n         <meshBasicMaterial color=\"mediumpurple\" />\n       </mesh>\n\n\n\n\n\n\n\n     </>\n   );\n };\n\n export default FPSControls;\n\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEC,SAASA,aAAa,EAAEC,iBAAiB,QAAQ,mBAAmB;AACpE,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,OAAOC,KAAK,IAAIC,WAAW,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,eAAe,QAAQ,OAAO;AACxF,SAASC,OAAO,QAAQ,OAAO;AAC/B,OAAOC,QAAQ,MAAM,UAAU;AAC/B,OAAO,KAAKC,KAAK,MAAM,OAAO;AAAA;AAAA;AAE9B,IAAIC,QAAQ,GAAG,CAAC;AAChB,IAAIC,QAAQ,GAAG,CAAC;AAChB,IAAIC,QAAQ,GAAG,CAAC;AAChB,IAAIC,QAAQ,GAAG,CAAC;AAChB,IAAIC,UAAU;AACd,IAAMC,UAAU,GAAG,IAAIR,OAAO,EAAE;AAChC,IAAMS,QAAQ,GAAG,IAAIT,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AAIrC,IAAMU,gBAAgB,GAAG;EACvBC,IAAI,EAAEC,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC;EACjDC,IAAI,EAAE,GAAG;EACTC,kBAAkB,EAAE,CAAC;EACrBC,IAAI,EAAE,QAAQ;EACdC,YAAY,EAAE,IAAI;EAClBC,KAAK,EAAE,QAAQ;EACfC,QAAQ,EAAE;IAAEC,GAAG,EAAE,MAAM;IAAEC,IAAI,EAAE;EAAO,CAAC;EACvCC,WAAW,EAAE;AACf,CAAC;AAED,IAAMC,UAAU,GAAG,SAAbA,UAAU,CAAIC,GAAG,EAAEC,IAAI,EAAK;EAChC,IAAMC,OAAO,GAAGD,IAAI,CAACE,MAAM,CAACC,CAAC;EAC7B,IAAMC,IAAI,GAAGJ,IAAI,CAACE,MAAM,CAACG,CAAC;EAG5B,IAAIJ,OAAO,GAAG,CAAC,EAAE;IACfvB,QAAQ,GAAG4B,IAAI,CAACC,GAAG,CAACN,OAAO,CAAC;IAC5BtB,QAAQ,GAAG,CAAC;EACd,CAAC,MAAM,IAAIsB,OAAO,GAAG,CAAC,EAAE;IACtBvB,QAAQ,GAAG,CAAC;IACZC,QAAQ,GAAG2B,IAAI,CAACC,GAAG,CAACN,OAAO,CAAC;EAC9B;EAEA,IAAIG,IAAI,GAAG,CAAC,EAAE;IACZvB,QAAQ,GAAG,CAAC;IACZD,QAAQ,GAAG0B,IAAI,CAACC,GAAG,CAACH,IAAI,CAAC;EAC3B,CAAC,MAAM,IAAIA,IAAI,GAAG,CAAC,EAAE;IACnBvB,QAAQ,GAAGyB,IAAI,CAACC,GAAG,CAACH,IAAI,CAAC;IACzBxB,QAAQ,GAAG,CAAC;EACd;AACA,CAAC;AAGD,SAAS4B,WAAW,OAAqB;EAAA;EAAA,IAAlBC,cAAc,QAAdA,cAAc;EACnC,IAAMC,SAAS,GAAG,SAAZA,SAAS,CAAIC,KAAK,EAAK;IAC3B,QAAQA,KAAK,CAACC,IAAI;MAChB,KAAK,SAAS;MACd,KAAK,MAAM;QACTd,UAAU,CAAC,CAAC,CAAC,EAAE;UAAEI,MAAM,EAAE;YAAEC,CAAC,EAAE;UAAE;QAAE,CAAC,CAAC;QACpC;MAEF,KAAK,WAAW;MAChB,KAAK,MAAM;QACTL,UAAU,CAAC,CAAC,CAAC,EAAE;UAAEI,MAAM,EAAE;YAAEG,CAAC,EAAE,CAAC;UAAE;QAAE,CAAC,CAAC;QACrC;MAEF,KAAK,WAAW;MAChB,KAAK,MAAM;QACTP,UAAU,CAAC,CAAC,CAAC,EAAE;UAAEI,MAAM,EAAE;YAAEC,CAAC,EAAE,CAAC;UAAE;QAAE,CAAC,CAAC;QACrC;MAEF,KAAK,YAAY;MACjB,KAAK,MAAM;QACTL,UAAU,CAAC,CAAC,CAAC,EAAE;UAAEI,MAAM,EAAE;YAAEG,CAAC,EAAE;UAAE;QAAE,CAAC,CAAC;QACpC;MACF;QACE;IAAM;EAEZ,CAAC;EAED,IAAMQ,OAAO,GAAG,SAAVA,OAAO,CAAIF,KAAK,EAAK;IACzB,QAAQA,KAAK,CAACC,IAAI;MAChB,KAAK,SAAS;MACd,KAAK,MAAM;QACTlC,QAAQ,GAAG,CAAC;QACZ;MAEF,KAAK,WAAW;MAChB,KAAK,MAAM;QACTG,QAAQ,GAAG,CAAC;QACZ;MAEF,KAAK,WAAW;MAChB,KAAK,MAAM;QACTF,QAAQ,GAAG,CAAC;QACZ;MAEF,KAAK,YAAY;MACjB,KAAK,MAAM;QACTC,QAAQ,GAAG,CAAC;QACZ;MACF;QACE;IAAM;EAEZ,CAAC;EAEDT,SAAS,CAAC,YAAM;IACd,IAAIsC,cAAc,EAAE;MAClBtB,QAAQ,CAAC2B,gBAAgB,CAAC,SAAS,EAAEJ,SAAS,CAAC;MAC/CvB,QAAQ,CAAC2B,gBAAgB,CAAC,OAAO,EAAED,OAAO,CAAC;IAC7C;IAEA,OAAO,YAAM;MACX1B,QAAQ,CAAC4B,mBAAmB,CAAC,SAAS,EAAEL,SAAS,CAAC;MAClDvB,QAAQ,CAAC4B,mBAAmB,CAAC,OAAO,EAAEF,OAAO,CAAC;IAChD,CAAC;EACH,CAAC,EAAE,CAACJ,cAAc,CAAC,CAAC;AACtB;AAAC,GAhEQD,WAAW;AAkEpB,SAASQ,WAAW,QAAqB;EAAA;EAAA,IAAlBC,cAAc,SAAdA,cAAc;EACnC,IAAMC,SAAS,GAAG,SAAZA,SAAS,GAAS;IACtBvC,QAAQ,GAAG,CAAC;IACZD,QAAQ,GAAG,CAAC;IACZG,QAAQ,GAAG,CAAC;IACZD,QAAQ,GAAG,CAAC;EACd,CAAC;EAEDT,SAAS,CAAC,YAAM;IACd,IAAI,CAACW,UAAU,IAAImC,cAAc,EAAE;MACjCnC,UAAU,GAAGN,QAAQ,CAAC2C,MAAM,CAAClC,gBAAgB,CAAC;MAC9CH,UAAU,CAAC,GAAG,CAAC,CAACsC,EAAE,CAAC,MAAM,EAAEtB,UAAU,CAAC;MACtChB,UAAU,CAAC,GAAG,CAAC,CAACsC,EAAE,CAAC,KAAK,EAAEF,SAAS,CAAC;IACtC;IAEA,OAAO,YAAM;MACX,IAAIpC,UAAU,EAAE;QACdA,UAAU,CAAC,GAAG,CAAC,CAACuC,GAAG,CAAC,MAAM,EAAEvB,UAAU,CAAC;QACvChB,UAAU,CAAC,GAAG,CAAC,CAACuC,GAAG,CAAC,KAAK,EAAEH,SAAS,CAAC;MACvC;IACF,CAAC;EACH,CAAC,EAAE,CAACD,cAAc,CAAC,CAAC;AACtB;AAAC,IAtBQD,WAAW;AAyBpB,IAAMM,WAAW,GAAG,SAAdA,WAAW,QAMX;EAAA;EAAA,IALJL,cAAc,SAAdA,cAAc;IACdR,cAAc,SAAdA,cAAc;IAAA,yBACdc,UAAU;IAAVA,UAAU,iCAAG,CAAC,CAAC;IAAA,uBACfC,QAAQ;IAARA,QAAQ,+BAAG,CAAC,CAAC;IAAA,mBACbC,IAAI;IAAJA,IAAI,2BAAG,GAAG;EAEV,IAAMC,QAAQ,GAAGtD,MAAM,EAAE;EACzB,IAAMuD,MAAM,GAAGvD,MAAM,EAAE;EACvB,IAAMwD,OAAO,GAAGxD,MAAM,EAAE;EAExB,IAAMyD,YAAY,GAAG3D,WAAW,CAAC,YAAM;IACrC,IAAM4D,IAAI,GAAGF,OAAO,CAACG,OAAO;IAC5B,IAAMC,QAAQ,GAAGN,QAAQ,CAACK,OAAO;IACjC,IAAME,MAAM,GAAGN,MAAM,CAACI,OAAO;;IAE7B;IACA,IAAMG,KAAK,GAAGF,QAAQ,CAACG,iBAAiB,EAAE;IAG1C,IAAIzD,QAAQ,GAAG,CAAC,EAAE;MAChBK,UAAU,CAACqD,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC1D,QAAQ,CAAC,CAAC2D,cAAc,CAACrD,QAAQ,EAAEkD,KAAK,CAAC;MAC/DJ,IAAI,CAACpC,QAAQ,CAAC4C,eAAe,CAACvD,UAAU,EAAE0C,IAAI,CAAC;IACjD;IAEA,IAAI9C,QAAQ,GAAG,CAAC,EAAE;MAChBI,UAAU,CAACqD,GAAG,CAAC,CAAC,EAAE,CAAC,EAAEzD,QAAQ,CAAC,CAAC0D,cAAc,CAACrD,QAAQ,EAAEkD,KAAK,CAAC;MAC9DJ,IAAI,CAACpC,QAAQ,CAAC4C,eAAe,CAACvD,UAAU,EAAE0C,IAAI,CAAC;IACjD;IAEA,IAAI5C,QAAQ,GAAG,CAAC,EAAE;MAChBE,UAAU,CAACqD,GAAG,CAAC,CAACvD,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC,CAACwD,cAAc,CAACrD,QAAQ,EAAEkD,KAAK,CAAC;MAC/DJ,IAAI,CAACpC,QAAQ,CAAC4C,eAAe,CAACvD,UAAU,EAAE0C,IAAI,CAAC;IACjD;IAEA,IAAI7C,QAAQ,GAAG,CAAC,EAAE;MAChBG,UAAU,CAACqD,GAAG,CAACxD,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC,CAACyD,cAAc,CAACrD,QAAQ,EAAEkD,KAAK,CAAC;MAC9DJ,IAAI,CAACpC,QAAQ,CAAC4C,eAAe,CAACvD,UAAU,EAAE0C,IAAI,CAAC;IAEjD;IAEAK,IAAI,CAACS,iBAAiB,EAAE;IACxB,IAAIC,WAAW,GAAGV,IAAI,CAACpC,QAAQ;;IAE/B;IACAuC,MAAM,CAACvC,QAAQ,CAAC+C,GAAG,CAACT,QAAQ,CAACU,MAAM,CAAC;IACpCV,QAAQ,CAACU,MAAM,CAACC,IAAI,CAACb,IAAI,CAACpC,QAAQ,CAAC;IACnCuC,MAAM,CAACvC,QAAQ,CAACkD,GAAG,CAACd,IAAI,CAACpC,QAAQ,CAAC;EAGpC,CAAC,EAAE,CAACkC,OAAO,EAAEF,QAAQ,EAAEC,MAAM,EAAEF,IAAI,CAAC,CAAC;EAErCzD,QAAQ,CAAC,UAAC6E,KAAK,EAAK;IAClBhB,YAAY,EAAE;EAEhB,CAAC,CAAC;EAEFb,WAAW,CAAC;IAAEC,cAAc,EAAdA;EAAe,CAAC,CAAC;EAC/BT,WAAW,CAAC;IAAEC,cAAc,EAAdA;EAAe,CAAC,CAAC;EAI/B,oBACE;IAAA,wBACE,QAAC,aAAa;MACZ,UAAU,EAAE,KAAM;MAClB,aAAa,EAAE,IAAK;MACpB,UAAU,EAAE,KAAM;MAClB,SAAS,EAAE,KAAM;MACjB,eAAe,EAAE,CAAE;MACnB,WAAW,EAAE,GAAI;MACjB,aAAa,EAAE;IAAK,GAChBc,UAAU;MACd,GAAG,EAAEG;IAAS;MAAA;MAAA;MAAA;IAAA,SACd,eACF,QAAC,iBAAiB,kCAAKF,QAAQ;MAAE,GAAG,EAAEG;IAAO;MAAA;MAAA;MAAA;IAAA,SAAG,eAMhD;MACE,QAAQ,EAAEJ,UAAU,CAACmB,MAAM,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE;MACzC,OAAO,EAAE,IAAK;MACd,GAAG,EAAEd,OAAQ;MAAA,wBAGb;QAAa,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;MAAE;QAAA;QAAA;QAAA;MAAA,SAAE,eAC/B;QAAmB,KAAK,EAAC;MAAc;QAAA;QAAA;QAAA;MAAA,SAAG;IAAA;MAAA;MAAA;MAAA;IAAA,SACrC;EAAA,gBAQN;AAEP,CAAC;AAAC,IAnGIN,WAAW;EAAA,QAoDftD,QAAQ,EAKRgD,WAAW,EACXR,WAAW;AAAA;AAAA,KA1DPc,WAAW;AAqGjB,eAAeA,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module"}