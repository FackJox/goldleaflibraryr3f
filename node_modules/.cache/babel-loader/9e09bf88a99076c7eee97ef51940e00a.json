{"ast":null,"code":"import _objectSpread from \"/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/src/components/FPSControls.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _this = this,\n  _s3 = $RefreshSig$();\nimport * as THREE from \"three\";\nimport { useBox } from \"@react-three/cannon\";\nimport { OrbitControls, PerspectiveCamera } from \"@react-three/drei\";\nimport { useFrame } from \"@react-three/fiber\";\nimport React, { useCallback, useEffect, useRef } from \"react\";\nimport nipplejs from \"nipplejs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar fwdValue = 0;\nvar bkdValue = 0;\nvar rgtValue = 0;\nvar lftValue = 0;\nvar joyManager;\nvar SPEED = 5;\nvar fwdVector = new THREE.Vector3();\nvar bkwVector = new THREE.Vector3();\nvar lftVector = new THREE.Vector3();\nvar rgtVector = new THREE.Vector3();\nvar frontVector = new THREE.Vector3();\nvar sideVector = new THREE.Vector3();\nvar upVector = new THREE.Vector3(0, 1, 0);\nvar direction = new THREE.Vector3();\nvar speed = new THREE.Vector3();\nvar NIPPLEJS_OPTIONS = {\n  zone: document.getElementById(\"joystickWrapper1\"),\n  size: 120,\n  multitouch: false,\n  maxNumberOfNipples: 1,\n  mode: \"static\",\n  restJoystick: true,\n  shape: \"circle\",\n  position: {\n    top: \"60px\",\n    left: \"60px\"\n  },\n  dynamicPage: false\n};\nvar handleMove = function handleMove(evt, data) {\n  var forward = data.vector.y;\n  var turn = data.vector.x;\n  if (forward > 0) {\n    fwdValue = Math.abs(forward);\n    bkdValue = 0;\n  } else if (forward < 0) {\n    fwdValue = 0;\n    bkdValue = Math.abs(forward);\n  }\n  if (turn > 0) {\n    lftValue = 0;\n    rgtValue = Math.abs(turn);\n  } else if (turn < 0) {\n    lftValue = Math.abs(turn);\n    rgtValue = 0;\n  }\n};\nfunction useKeyboard(_ref) {\n  _s();\n  var enableKeyboard = _ref.enableKeyboard;\n  var onKeyDown = function onKeyDown(event) {\n    switch (event.code) {\n      case \"ArrowUp\":\n      case \"KeyW\":\n        handleMove({}, {\n          vector: {\n            y: 1\n          }\n        });\n        break;\n      case \"ArrowLeft\":\n      case \"KeyA\":\n        handleMove({}, {\n          vector: {\n            x: -1\n          }\n        });\n        break;\n      case \"ArrowDown\":\n      case \"KeyS\":\n        handleMove({}, {\n          vector: {\n            y: -1\n          }\n        });\n        break;\n      case \"ArrowRight\":\n      case \"KeyD\":\n        handleMove({}, {\n          vector: {\n            x: 1\n          }\n        });\n        break;\n      default:\n        break;\n    }\n  };\n  var onKeyUp = function onKeyUp(event) {\n    switch (event.code) {\n      case \"ArrowUp\":\n      case \"KeyW\":\n        fwdValue = 0;\n        break;\n      case \"ArrowLeft\":\n      case \"KeyA\":\n        lftValue = 0;\n        break;\n      case \"ArrowDown\":\n      case \"KeyS\":\n        bkdValue = 0;\n        break;\n      case \"ArrowRight\":\n      case \"KeyD\":\n        rgtValue = 0;\n        break;\n      default:\n        break;\n    }\n  };\n  useEffect(function () {\n    if (enableKeyboard) {\n      document.addEventListener(\"keydown\", onKeyDown);\n      document.addEventListener(\"keyup\", onKeyUp);\n    }\n    return function () {\n      document.removeEventListener(\"keydown\", onKeyDown);\n      document.removeEventListener(\"keyup\", onKeyUp);\n    };\n  }, [enableKeyboard]);\n}\n_s(useKeyboard, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nfunction useJoystick(_ref2) {\n  _s2();\n  var enableJoystick = _ref2.enableJoystick;\n  var handleEnd = function handleEnd() {\n    bkdValue = 0;\n    fwdValue = 0;\n    lftValue = 0;\n    rgtValue = 0;\n  };\n  useEffect(function () {\n    if (!joyManager && enableJoystick) {\n      joyManager = nipplejs.create(NIPPLEJS_OPTIONS);\n      joyManager[\"0\"].on(\"move\", handleMove);\n      joyManager[\"0\"].on(\"end\", handleEnd);\n    }\n    return function () {\n      if (joyManager) {\n        joyManager[\"0\"].off(\"move\", handleMove);\n        joyManager[\"0\"].off(\"end\", handleEnd);\n      }\n    };\n  }, [enableJoystick]);\n}\n_s2(useJoystick, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nvar FPSControls = function FPSControls(_ref3) {\n  _s3();\n  var enableJoystick = _ref3.enableJoystick,\n    enableKeyboard = _ref3.enableKeyboard,\n    _ref3$orbitProps = _ref3.orbitProps,\n    orbitProps = _ref3$orbitProps === void 0 ? {} : _ref3$orbitProps,\n    _ref3$camProps = _ref3.camProps,\n    camProps = _ref3$camProps === void 0 ? {} : _ref3$camProps,\n    _ref3$mult = _ref3.mult,\n    mult = _ref3$mult === void 0 ? 0.1 : _ref3$mult,\n    props = _ref3.props;\n  var orbitRef = useRef();\n  var camRef = useRef();\n  var _useBox = useBox(function () {\n      return _objectSpread({\n        mass: 1,\n        type: \"Dynamic\",\n        position: [0, 2, 0]\n      }, props);\n    }),\n    _useBox2 = _slicedToArray(_useBox, 2),\n    meshRef = _useBox2[0],\n    api = _useBox2[1];\n  var velocity = useRef([0, 0, 0]);\n  useEffect(function () {\n    return api.velocity.subscribe(function (v) {\n      return velocity.current = v;\n    });\n  }, []);\n  var updatePlayer = useCallback(function () {\n    var mesh = meshRef.current;\n    var controls = orbitRef.current;\n    var camera = camRef.current;\n\n    // move the player\n    var angle = controls.getAzimuthalAngle();\n    if (fwdValue > 0) {\n      fwdVector.set(0, 0, -fwdValue).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(fwdVector, mult);\n    }\n    if (bkdValue > 0) {\n      bkwVector.set(0, 0, bkdValue).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(bkwVector, mult);\n    }\n\n    //     frontVector.set(0, 0, Number(backward) - Number(forward))\n    frontVector.set(0, 0, Number(bkdValue) - Number(fwdValue));\n\n    // console.log(\"fwdVector\", fwdVector)\n    // console.log(\"bkwVector\", bkwVector)\n    // console.log(\"frontVector\", frontVector)\n\n    if (lftValue > 0) {\n      lftVector.set(-lftValue, 0, 0).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(lftVector, mult);\n    }\n    if (rgtValue > 0) {\n      rgtVector.set(rgtValue, 0, 0).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(rgtVector, mult);\n    }\n\n    // sideVector.set(Number(left) - Number(right), 0, 0)\n    sideVector.set(Number(lftValue) - Number(rgtValue), 0, 0);\n    direction.subVectors(frontVector, sideVector).normalize().multiplyScalar(SPEED);\n    speed.fromArray(velocity.current);\n    api.velocity.set(direction.x, velocity.current[1], direction.z);\n\n    // console.log(velocity)\n    // console.log(direction.x)\n    // console.log(direction.z)\n\n    // mesh.updateMatrixWorld();\n\n    // reposition camera\n    camera.position.sub(controls.target);\n    controls.target.copy(mesh.position);\n    camera.position.add(mesh.position);\n  }, [meshRef, orbitRef, camRef, api, mult]);\n  useFrame(function () {\n    updatePlayer();\n  });\n  useJoystick({\n    enableJoystick: enableJoystick\n  });\n  useKeyboard({\n    enableKeyboard: enableKeyboard\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(PerspectiveCamera, _objectSpread(_objectSpread({}, camProps), {}, {\n      ref: camRef\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(OrbitControls, _objectSpread(_objectSpread({\n      autoRotate: false,\n      enableDamping: true,\n      enableZoom: false,\n      enablePan: false,\n      autoRotateSpeed: 0,\n      rotateSpeed: 1,\n      dampingFactor: 0.03\n    }, orbitProps), {}, {\n      ref: orbitRef\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      position: orbitProps.target || [0, 0, 0],\n      visible: false,\n      ref: meshRef,\n      children: [/*#__PURE__*/_jsxDEV(\"boxGeometry\", {\n        args: [1, 1, 1]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"meshStandardMaterial\", {\n        color: \"white\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n_s3(FPSControls, \"GAXI52zWvWRdHM4IDlXmMuTcgQg=\", false, function () {\n  return [useBox, useFrame, useJoystick, useKeyboard];\n});\n_c = FPSControls;\nexport default FPSControls;\nvar _c;\n$RefreshReg$(_c, \"FPSControls\");","map":{"version":3,"names":["THREE","useBox","OrbitControls","PerspectiveCamera","useFrame","React","useCallback","useEffect","useRef","nipplejs","fwdValue","bkdValue","rgtValue","lftValue","joyManager","SPEED","fwdVector","Vector3","bkwVector","lftVector","rgtVector","frontVector","sideVector","upVector","direction","speed","NIPPLEJS_OPTIONS","zone","document","getElementById","size","multitouch","maxNumberOfNipples","mode","restJoystick","shape","position","top","left","dynamicPage","handleMove","evt","data","forward","vector","y","turn","x","Math","abs","useKeyboard","enableKeyboard","onKeyDown","event","code","onKeyUp","addEventListener","removeEventListener","useJoystick","enableJoystick","handleEnd","create","on","off","FPSControls","orbitProps","camProps","mult","props","orbitRef","camRef","mass","type","meshRef","api","velocity","subscribe","v","current","updatePlayer","mesh","controls","camera","angle","getAzimuthalAngle","set","applyAxisAngle","addScaledVector","Number","subVectors","normalize","multiplyScalar","fromArray","z","sub","target","copy","add"],"sources":["/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/src/components/FPSControls.jsx"],"sourcesContent":["import * as THREE from \"three\";\nimport { useBox } from \"@react-three/cannon\";\nimport { OrbitControls, PerspectiveCamera } from \"@react-three/drei\";\nimport { useFrame } from \"@react-three/fiber\";\nimport React, { useCallback, useEffect, useRef } from \"react\";\nimport nipplejs from \"nipplejs\";\n\nlet fwdValue = 0;\nlet bkdValue = 0;\nlet rgtValue = 0;\nlet lftValue = 0;\nlet joyManager;\nconst SPEED = 5\nconst fwdVector = new THREE.Vector3();\nconst bkwVector = new THREE.Vector3();\nconst lftVector = new THREE.Vector3();\nconst rgtVector = new THREE.Vector3();\nconst frontVector = new THREE.Vector3();\nconst sideVector = new THREE.Vector3();\nconst upVector = new THREE.Vector3(0, 1, 0);\nconst direction = new THREE.Vector3();\nconst speed = new THREE.Vector3()\n\nconst NIPPLEJS_OPTIONS = {\n  zone: document.getElementById(\"joystickWrapper1\"),\n  size: 120,\n  multitouch: false,\n  maxNumberOfNipples: 1,\n  mode: \"static\",\n  restJoystick: true,\n  shape: \"circle\",\n  position: { top: \"60px\", left: \"60px\" },\n  dynamicPage: false\n};\n\nconst handleMove = (evt, data) => {\n  const forward = data.vector.y;\n  const turn = data.vector.x;\n\n  if (forward > 0) {\n    fwdValue = Math.abs(forward);\n    bkdValue = 0;\n  } else if (forward < 0) {\n    fwdValue = 0;\n    bkdValue = Math.abs(forward);\n  }\n\n  if (turn > 0) {\n    lftValue = 0;\n    rgtValue = Math.abs(turn);\n  } else if (turn < 0) {\n    lftValue = Math.abs(turn);\n    rgtValue = 0;\n  }\n};\n\nfunction useKeyboard({ enableKeyboard }) {\n  const onKeyDown = (event) => {\n    switch (event.code) {\n      case \"ArrowUp\":\n      case \"KeyW\":\n        handleMove({}, { vector: { y: 1 } });\n        break;\n\n      case \"ArrowLeft\":\n      case \"KeyA\":\n        handleMove({}, { vector: { x: -1 } });\n        break;\n\n      case \"ArrowDown\":\n      case \"KeyS\":\n        handleMove({}, { vector: { y: -1 } });\n        break;\n\n      case \"ArrowRight\":\n      case \"KeyD\":\n        handleMove({}, { vector: { x: 1 } });\n        break;\n      default:\n        break;\n    }\n  };\n\n  const onKeyUp = (event) => {\n    switch (event.code) {\n      case \"ArrowUp\":\n      case \"KeyW\":\n        fwdValue = 0;\n        break;\n\n      case \"ArrowLeft\":\n      case \"KeyA\":\n        lftValue = 0;\n        break;\n\n      case \"ArrowDown\":\n      case \"KeyS\":\n        bkdValue = 0;\n        break;\n\n      case \"ArrowRight\":\n      case \"KeyD\":\n        rgtValue = 0;\n        break;\n      default:\n        break;\n    }\n  };\n\n  useEffect(() => {\n    if (enableKeyboard) {\n      document.addEventListener(\"keydown\", onKeyDown);\n      document.addEventListener(\"keyup\", onKeyUp);\n    }\n\n    return () => {\n      document.removeEventListener(\"keydown\", onKeyDown);\n      document.removeEventListener(\"keyup\", onKeyUp);\n    };\n  }, [enableKeyboard]);\n}\n\nfunction useJoystick({ enableJoystick }) {\n  const handleEnd = () => {\n    bkdValue = 0;\n    fwdValue = 0;\n    lftValue = 0;\n    rgtValue = 0;\n  };\n\n  useEffect(() => {\n    if (!joyManager && enableJoystick) {\n      joyManager = nipplejs.create(NIPPLEJS_OPTIONS);\n      joyManager[\"0\"].on(\"move\", handleMove);\n      joyManager[\"0\"].on(\"end\", handleEnd);\n    }\n\n    return () => {\n      if (joyManager) {\n        joyManager[\"0\"].off(\"move\", handleMove);\n        joyManager[\"0\"].off(\"end\", handleEnd);\n      }\n    };\n  }, [enableJoystick]);\n}\n\nconst FPSControls = ({\n  enableJoystick,\n  enableKeyboard,\n  orbitProps = {},\n  camProps = {},\n  mult = 0.1,\n  props\n}) => {\n  const orbitRef = useRef();\n  const camRef = useRef();\n  const [meshRef, api] = useBox(() => ({\n    mass: 1,\n    type: \"Dynamic\",\n    position: [0, 2, 0]\n  , ...props}));\n\n  const velocity = useRef([0, 0, 0]);\n  \n  useEffect(\n    () => api.velocity.subscribe((v) => (velocity.current = v)),\n    []\n  );\n\n  const updatePlayer = useCallback(() => {\n    const mesh = meshRef.current;\n    const controls = orbitRef.current;\n    const camera = camRef.current;\n\n    // move the player\n    const angle = controls.getAzimuthalAngle();\n\n    if (fwdValue > 0) {\n      fwdVector.set(0, 0, -fwdValue).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(fwdVector, mult);\n    }\n\n    if (bkdValue > 0) {\n      bkwVector.set(0, 0, bkdValue).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(bkwVector, mult);\n    }\n\n    //     frontVector.set(0, 0, Number(backward) - Number(forward))\n    frontVector.set(0, 0, Number(bkdValue) - Number(fwdValue));\n\n    // console.log(\"fwdVector\", fwdVector)\n    // console.log(\"bkwVector\", bkwVector)\n    // console.log(\"frontVector\", frontVector)\n\n    if (lftValue > 0) {\n      lftVector.set(-lftValue, 0, 0).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(lftVector, mult);\n    }\n\n    if (rgtValue > 0) {\n      rgtVector.set(rgtValue, 0, 0).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(rgtVector, mult);\n    }\n\n    // sideVector.set(Number(left) - Number(right), 0, 0)\n    sideVector.set(Number(lftValue) - Number(rgtValue), 0, 0);\n\n    direction.subVectors(frontVector, sideVector).normalize().multiplyScalar(SPEED)\n    speed.fromArray(velocity.current)\n\n    \n    api.velocity.set(direction.x, velocity.current[1], direction.z);\n\n    // console.log(velocity)\n    // console.log(direction.x)\n    // console.log(direction.z)\n\n    // mesh.updateMatrixWorld();\n\n    // reposition camera\n    camera.position.sub(controls.target);\n    controls.target.copy(mesh.position);\n    camera.position.add(mesh.position);\n  }, [meshRef, orbitRef, camRef, api, mult]);\n\n  useFrame(() => {\n    updatePlayer();\n\n\n  });\n\n  useJoystick({ enableJoystick });\n  useKeyboard({ enableKeyboard });\n\n  \n\n  return (\n    <>\n      <PerspectiveCamera {...camProps} ref={camRef} />\n      <OrbitControls\n        autoRotate={false}\n        enableDamping={true}\n        enableZoom={false}\n        enablePan={false}\n        autoRotateSpeed={0}\n        rotateSpeed={1}\n        dampingFactor={0.03}\n        {...orbitProps}\n        ref={orbitRef}\n      />\n\n      <mesh\n        position={orbitProps.target || [0, 0, 0]}\n        visible={false}\n        ref={meshRef}\n      >\n        <boxGeometry args={[1, 1, 1]} />\n        <meshStandardMaterial color=\"white\" />\n      </mesh>\n    </>\n  );\n};\n\nexport default FPSControls;\n"],"mappings":";;;;;;;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,MAAM,QAAQ,qBAAqB;AAC5C,SAASC,aAAa,EAAEC,iBAAiB,QAAQ,mBAAmB;AACpE,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,OAAOC,KAAK,IAAIC,WAAW,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC7D,OAAOC,QAAQ,MAAM,UAAU;AAAC;AAAA;AAEhC,IAAIC,QAAQ,GAAG,CAAC;AAChB,IAAIC,QAAQ,GAAG,CAAC;AAChB,IAAIC,QAAQ,GAAG,CAAC;AAChB,IAAIC,QAAQ,GAAG,CAAC;AAChB,IAAIC,UAAU;AACd,IAAMC,KAAK,GAAG,CAAC;AACf,IAAMC,SAAS,GAAG,IAAIhB,KAAK,CAACiB,OAAO,EAAE;AACrC,IAAMC,SAAS,GAAG,IAAIlB,KAAK,CAACiB,OAAO,EAAE;AACrC,IAAME,SAAS,GAAG,IAAInB,KAAK,CAACiB,OAAO,EAAE;AACrC,IAAMG,SAAS,GAAG,IAAIpB,KAAK,CAACiB,OAAO,EAAE;AACrC,IAAMI,WAAW,GAAG,IAAIrB,KAAK,CAACiB,OAAO,EAAE;AACvC,IAAMK,UAAU,GAAG,IAAItB,KAAK,CAACiB,OAAO,EAAE;AACtC,IAAMM,QAAQ,GAAG,IAAIvB,KAAK,CAACiB,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AAC3C,IAAMO,SAAS,GAAG,IAAIxB,KAAK,CAACiB,OAAO,EAAE;AACrC,IAAMQ,KAAK,GAAG,IAAIzB,KAAK,CAACiB,OAAO,EAAE;AAEjC,IAAMS,gBAAgB,GAAG;EACvBC,IAAI,EAAEC,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC;EACjDC,IAAI,EAAE,GAAG;EACTC,UAAU,EAAE,KAAK;EACjBC,kBAAkB,EAAE,CAAC;EACrBC,IAAI,EAAE,QAAQ;EACdC,YAAY,EAAE,IAAI;EAClBC,KAAK,EAAE,QAAQ;EACfC,QAAQ,EAAE;IAAEC,GAAG,EAAE,MAAM;IAAEC,IAAI,EAAE;EAAO,CAAC;EACvCC,WAAW,EAAE;AACf,CAAC;AAED,IAAMC,UAAU,GAAG,SAAbA,UAAU,CAAIC,GAAG,EAAEC,IAAI,EAAK;EAChC,IAAMC,OAAO,GAAGD,IAAI,CAACE,MAAM,CAACC,CAAC;EAC7B,IAAMC,IAAI,GAAGJ,IAAI,CAACE,MAAM,CAACG,CAAC;EAE1B,IAAIJ,OAAO,GAAG,CAAC,EAAE;IACfjC,QAAQ,GAAGsC,IAAI,CAACC,GAAG,CAACN,OAAO,CAAC;IAC5BhC,QAAQ,GAAG,CAAC;EACd,CAAC,MAAM,IAAIgC,OAAO,GAAG,CAAC,EAAE;IACtBjC,QAAQ,GAAG,CAAC;IACZC,QAAQ,GAAGqC,IAAI,CAACC,GAAG,CAACN,OAAO,CAAC;EAC9B;EAEA,IAAIG,IAAI,GAAG,CAAC,EAAE;IACZjC,QAAQ,GAAG,CAAC;IACZD,QAAQ,GAAGoC,IAAI,CAACC,GAAG,CAACH,IAAI,CAAC;EAC3B,CAAC,MAAM,IAAIA,IAAI,GAAG,CAAC,EAAE;IACnBjC,QAAQ,GAAGmC,IAAI,CAACC,GAAG,CAACH,IAAI,CAAC;IACzBlC,QAAQ,GAAG,CAAC;EACd;AACF,CAAC;AAED,SAASsC,WAAW,OAAqB;EAAA;EAAA,IAAlBC,cAAc,QAAdA,cAAc;EACnC,IAAMC,SAAS,GAAG,SAAZA,SAAS,CAAIC,KAAK,EAAK;IAC3B,QAAQA,KAAK,CAACC,IAAI;MAChB,KAAK,SAAS;MACd,KAAK,MAAM;QACTd,UAAU,CAAC,CAAC,CAAC,EAAE;UAAEI,MAAM,EAAE;YAAEC,CAAC,EAAE;UAAE;QAAE,CAAC,CAAC;QACpC;MAEF,KAAK,WAAW;MAChB,KAAK,MAAM;QACTL,UAAU,CAAC,CAAC,CAAC,EAAE;UAAEI,MAAM,EAAE;YAAEG,CAAC,EAAE,CAAC;UAAE;QAAE,CAAC,CAAC;QACrC;MAEF,KAAK,WAAW;MAChB,KAAK,MAAM;QACTP,UAAU,CAAC,CAAC,CAAC,EAAE;UAAEI,MAAM,EAAE;YAAEC,CAAC,EAAE,CAAC;UAAE;QAAE,CAAC,CAAC;QACrC;MAEF,KAAK,YAAY;MACjB,KAAK,MAAM;QACTL,UAAU,CAAC,CAAC,CAAC,EAAE;UAAEI,MAAM,EAAE;YAAEG,CAAC,EAAE;UAAE;QAAE,CAAC,CAAC;QACpC;MACF;QACE;IAAM;EAEZ,CAAC;EAED,IAAMQ,OAAO,GAAG,SAAVA,OAAO,CAAIF,KAAK,EAAK;IACzB,QAAQA,KAAK,CAACC,IAAI;MAChB,KAAK,SAAS;MACd,KAAK,MAAM;QACT5C,QAAQ,GAAG,CAAC;QACZ;MAEF,KAAK,WAAW;MAChB,KAAK,MAAM;QACTG,QAAQ,GAAG,CAAC;QACZ;MAEF,KAAK,WAAW;MAChB,KAAK,MAAM;QACTF,QAAQ,GAAG,CAAC;QACZ;MAEF,KAAK,YAAY;MACjB,KAAK,MAAM;QACTC,QAAQ,GAAG,CAAC;QACZ;MACF;QACE;IAAM;EAEZ,CAAC;EAEDL,SAAS,CAAC,YAAM;IACd,IAAI4C,cAAc,EAAE;MAClBvB,QAAQ,CAAC4B,gBAAgB,CAAC,SAAS,EAAEJ,SAAS,CAAC;MAC/CxB,QAAQ,CAAC4B,gBAAgB,CAAC,OAAO,EAAED,OAAO,CAAC;IAC7C;IAEA,OAAO,YAAM;MACX3B,QAAQ,CAAC6B,mBAAmB,CAAC,SAAS,EAAEL,SAAS,CAAC;MAClDxB,QAAQ,CAAC6B,mBAAmB,CAAC,OAAO,EAAEF,OAAO,CAAC;IAChD,CAAC;EACH,CAAC,EAAE,CAACJ,cAAc,CAAC,CAAC;AACtB;AAAC,GAhEQD,WAAW;AAkEpB,SAASQ,WAAW,QAAqB;EAAA;EAAA,IAAlBC,cAAc,SAAdA,cAAc;EACnC,IAAMC,SAAS,GAAG,SAAZA,SAAS,GAAS;IACtBjD,QAAQ,GAAG,CAAC;IACZD,QAAQ,GAAG,CAAC;IACZG,QAAQ,GAAG,CAAC;IACZD,QAAQ,GAAG,CAAC;EACd,CAAC;EAEDL,SAAS,CAAC,YAAM;IACd,IAAI,CAACO,UAAU,IAAI6C,cAAc,EAAE;MACjC7C,UAAU,GAAGL,QAAQ,CAACoD,MAAM,CAACnC,gBAAgB,CAAC;MAC9CZ,UAAU,CAAC,GAAG,CAAC,CAACgD,EAAE,CAAC,MAAM,EAAEtB,UAAU,CAAC;MACtC1B,UAAU,CAAC,GAAG,CAAC,CAACgD,EAAE,CAAC,KAAK,EAAEF,SAAS,CAAC;IACtC;IAEA,OAAO,YAAM;MACX,IAAI9C,UAAU,EAAE;QACdA,UAAU,CAAC,GAAG,CAAC,CAACiD,GAAG,CAAC,MAAM,EAAEvB,UAAU,CAAC;QACvC1B,UAAU,CAAC,GAAG,CAAC,CAACiD,GAAG,CAAC,KAAK,EAAEH,SAAS,CAAC;MACvC;IACF,CAAC;EACH,CAAC,EAAE,CAACD,cAAc,CAAC,CAAC;AACtB;AAAC,IAtBQD,WAAW;AAwBpB,IAAMM,WAAW,GAAG,SAAdA,WAAW,QAOX;EAAA;EAAA,IANJL,cAAc,SAAdA,cAAc;IACdR,cAAc,SAAdA,cAAc;IAAA,yBACdc,UAAU;IAAVA,UAAU,iCAAG,CAAC,CAAC;IAAA,uBACfC,QAAQ;IAARA,QAAQ,+BAAG,CAAC,CAAC;IAAA,mBACbC,IAAI;IAAJA,IAAI,2BAAG,GAAG;IACVC,KAAK,SAALA,KAAK;EAEL,IAAMC,QAAQ,GAAG7D,MAAM,EAAE;EACzB,IAAM8D,MAAM,GAAG9D,MAAM,EAAE;EACvB,cAAuBP,MAAM,CAAC;MAAA;QAC5BsE,IAAI,EAAE,CAAC;QACPC,IAAI,EAAE,SAAS;QACfpC,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;MAAC,GAChBgC,KAAK;IAAA,CAAE,CAAC;IAAA;IAJNK,OAAO;IAAEC,GAAG;EAMnB,IAAMC,QAAQ,GAAGnE,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;EAElCD,SAAS,CACP;IAAA,OAAMmE,GAAG,CAACC,QAAQ,CAACC,SAAS,CAAC,UAACC,CAAC;MAAA,OAAMF,QAAQ,CAACG,OAAO,GAAGD,CAAC;IAAA,CAAC,CAAC;EAAA,GAC3D,EAAE,CACH;EAED,IAAME,YAAY,GAAGzE,WAAW,CAAC,YAAM;IACrC,IAAM0E,IAAI,GAAGP,OAAO,CAACK,OAAO;IAC5B,IAAMG,QAAQ,GAAGZ,QAAQ,CAACS,OAAO;IACjC,IAAMI,MAAM,GAAGZ,MAAM,CAACQ,OAAO;;IAE7B;IACA,IAAMK,KAAK,GAAGF,QAAQ,CAACG,iBAAiB,EAAE;IAE1C,IAAI1E,QAAQ,GAAG,CAAC,EAAE;MAChBM,SAAS,CAACqE,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC3E,QAAQ,CAAC,CAAC4E,cAAc,CAAC/D,QAAQ,EAAE4D,KAAK,CAAC;MAC9DH,IAAI,CAAC5C,QAAQ,CAACmD,eAAe,CAACvE,SAAS,EAAEmD,IAAI,CAAC;IAChD;IAEA,IAAIxD,QAAQ,GAAG,CAAC,EAAE;MAChBO,SAAS,CAACmE,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE1E,QAAQ,CAAC,CAAC2E,cAAc,CAAC/D,QAAQ,EAAE4D,KAAK,CAAC;MAC7DH,IAAI,CAAC5C,QAAQ,CAACmD,eAAe,CAACrE,SAAS,EAAEiD,IAAI,CAAC;IAChD;;IAEA;IACA9C,WAAW,CAACgE,GAAG,CAAC,CAAC,EAAE,CAAC,EAAEG,MAAM,CAAC7E,QAAQ,CAAC,GAAG6E,MAAM,CAAC9E,QAAQ,CAAC,CAAC;;IAE1D;IACA;IACA;;IAEA,IAAIG,QAAQ,GAAG,CAAC,EAAE;MAChBM,SAAS,CAACkE,GAAG,CAAC,CAACxE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC,CAACyE,cAAc,CAAC/D,QAAQ,EAAE4D,KAAK,CAAC;MAC9DH,IAAI,CAAC5C,QAAQ,CAACmD,eAAe,CAACpE,SAAS,EAAEgD,IAAI,CAAC;IAChD;IAEA,IAAIvD,QAAQ,GAAG,CAAC,EAAE;MAChBQ,SAAS,CAACiE,GAAG,CAACzE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC0E,cAAc,CAAC/D,QAAQ,EAAE4D,KAAK,CAAC;MAC7DH,IAAI,CAAC5C,QAAQ,CAACmD,eAAe,CAACnE,SAAS,EAAE+C,IAAI,CAAC;IAChD;;IAEA;IACA7C,UAAU,CAAC+D,GAAG,CAACG,MAAM,CAAC3E,QAAQ,CAAC,GAAG2E,MAAM,CAAC5E,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAEzDY,SAAS,CAACiE,UAAU,CAACpE,WAAW,EAAEC,UAAU,CAAC,CAACoE,SAAS,EAAE,CAACC,cAAc,CAAC5E,KAAK,CAAC;IAC/EU,KAAK,CAACmE,SAAS,CAACjB,QAAQ,CAACG,OAAO,CAAC;IAGjCJ,GAAG,CAACC,QAAQ,CAACU,GAAG,CAAC7D,SAAS,CAACuB,CAAC,EAAE4B,QAAQ,CAACG,OAAO,CAAC,CAAC,CAAC,EAAEtD,SAAS,CAACqE,CAAC,CAAC;;IAE/D;IACA;IACA;;IAEA;;IAEA;IACAX,MAAM,CAAC9C,QAAQ,CAAC0D,GAAG,CAACb,QAAQ,CAACc,MAAM,CAAC;IACpCd,QAAQ,CAACc,MAAM,CAACC,IAAI,CAAChB,IAAI,CAAC5C,QAAQ,CAAC;IACnC8C,MAAM,CAAC9C,QAAQ,CAAC6D,GAAG,CAACjB,IAAI,CAAC5C,QAAQ,CAAC;EACpC,CAAC,EAAE,CAACqC,OAAO,EAAEJ,QAAQ,EAAEC,MAAM,EAAEI,GAAG,EAAEP,IAAI,CAAC,CAAC;EAE1C/D,QAAQ,CAAC,YAAM;IACb2E,YAAY,EAAE;EAGhB,CAAC,CAAC;EAEFrB,WAAW,CAAC;IAAEC,cAAc,EAAdA;EAAe,CAAC,CAAC;EAC/BT,WAAW,CAAC;IAAEC,cAAc,EAAdA;EAAe,CAAC,CAAC;EAI/B,oBACE;IAAA,wBACE,QAAC,iBAAiB,kCAAKe,QAAQ;MAAE,GAAG,EAAEI;IAAO;MAAA;MAAA;MAAA;IAAA,SAAG,eAChD,QAAC,aAAa;MACZ,UAAU,EAAE,KAAM;MAClB,aAAa,EAAE,IAAK;MACpB,UAAU,EAAE,KAAM;MAClB,SAAS,EAAE,KAAM;MACjB,eAAe,EAAE,CAAE;MACnB,WAAW,EAAE,CAAE;MACf,aAAa,EAAE;IAAK,GAChBL,UAAU;MACd,GAAG,EAAEI;IAAS;MAAA;MAAA;MAAA;IAAA,SACd,eAEF;MACE,QAAQ,EAAEJ,UAAU,CAAC8B,MAAM,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE;MACzC,OAAO,EAAE,KAAM;MACf,GAAG,EAAEtB,OAAQ;MAAA,wBAEb;QAAa,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;MAAE;QAAA;QAAA;QAAA;MAAA,SAAG,eAChC;QAAsB,KAAK,EAAC;MAAO;QAAA;QAAA;QAAA;MAAA,SAAG;IAAA;MAAA;MAAA;MAAA;IAAA,SACjC;EAAA,gBACN;AAEP,CAAC;AAAC,IAnHIT,WAAW;EAAA,QAUQ/D,MAAM,EAqE7BG,QAAQ,EAMRsD,WAAW,EACXR,WAAW;AAAA;AAAA,KAtFPc,WAAW;AAqHjB,eAAeA,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module"}