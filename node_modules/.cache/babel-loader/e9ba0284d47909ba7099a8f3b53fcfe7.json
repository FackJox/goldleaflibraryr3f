{"ast":null,"code":"import _objectSpread from \"/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/src/components/FPSControls.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _this = this,\n  _s3 = $RefreshSig$();\n/**\n * Based on https://codepen.io/ogames/pen/rNmYpdo\n * - refactored to use fiber + drei semantics and compatible with @react-three/fiber\n * - added keyboard listener\n * - adjustment for fps\n */\n\nimport { OrbitControls, PerspectiveCamera } from \"@react-three/drei\";\nimport { useFrame } from \"@react-three/fiber\";\nimport React, { useCallback, useEffect, useRef, useState, useLayoutEffect } from \"react\";\nimport { Vector3 } from \"three\";\nimport nipplejs from \"nipplejs\";\nimport { useBox } from \"@react-three/cannon\";\nimport * as THREE from 'three';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar fwdValue = 0;\nvar bkdValue = 0;\nvar rgtValue = 0;\nvar lftValue = 0;\nvar joyManager;\nvar tempVector = new Vector3();\nvar upVector = new Vector3(0, 1, 0);\nvar NIPPLEJS_OPTIONS = {\n  zone: document.getElementById(\"joystickWrapper1\"),\n  size: 120,\n  maxNumberOfNipples: 1,\n  mode: \"static\",\n  restJoystick: true,\n  shape: \"circle\",\n  position: {\n    top: \"60px\",\n    left: \"60px\"\n  },\n  dynamicPage: false\n};\nvar handleMove = function handleMove(evt, data) {\n  var forward = data.vector.y;\n  var turn = data.vector.x;\n  if (forward > 0) {\n    fwdValue = Math.abs(forward);\n    bkdValue = 0;\n  } else if (forward < 0) {\n    fwdValue = 0;\n    bkdValue = Math.abs(forward);\n  }\n  if (turn > 0) {\n    lftValue = 0;\n    rgtValue = Math.abs(turn);\n  } else if (turn < 0) {\n    lftValue = Math.abs(turn);\n    rgtValue = 0;\n  }\n};\nfunction useKeyboard(_ref) {\n  _s();\n  var enableKeyboard = _ref.enableKeyboard;\n  var onKeyDown = function onKeyDown(event) {\n    switch (event.code) {\n      case \"ArrowUp\":\n      case \"KeyW\":\n        handleMove({}, {\n          vector: {\n            y: 1\n          }\n        });\n        break;\n      case \"ArrowLeft\":\n      case \"KeyA\":\n        handleMove({}, {\n          vector: {\n            x: -1\n          }\n        });\n        break;\n      case \"ArrowDown\":\n      case \"KeyS\":\n        handleMove({}, {\n          vector: {\n            y: -1\n          }\n        });\n        break;\n      case \"ArrowRight\":\n      case \"KeyD\":\n        handleMove({}, {\n          vector: {\n            x: 1\n          }\n        });\n        break;\n      default:\n        break;\n    }\n  };\n  var onKeyUp = function onKeyUp(event) {\n    switch (event.code) {\n      case \"ArrowUp\":\n      case \"KeyW\":\n        fwdValue = 0;\n        break;\n      case \"ArrowLeft\":\n      case \"KeyA\":\n        lftValue = 0;\n        break;\n      case \"ArrowDown\":\n      case \"KeyS\":\n        bkdValue = 0;\n        break;\n      case \"ArrowRight\":\n      case \"KeyD\":\n        rgtValue = 0;\n        break;\n      default:\n        break;\n    }\n  };\n  useEffect(function () {\n    if (enableKeyboard) {\n      document.addEventListener(\"keydown\", onKeyDown);\n      document.addEventListener(\"keyup\", onKeyUp);\n    }\n    return function () {\n      document.removeEventListener(\"keydown\", onKeyDown);\n      document.removeEventListener(\"keyup\", onKeyUp);\n    };\n  }, [enableKeyboard]);\n}\n_s(useKeyboard, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nfunction useJoystick(_ref2) {\n  _s2();\n  var enableJoystick = _ref2.enableJoystick;\n  var handleEnd = function handleEnd() {\n    bkdValue = 0;\n    fwdValue = 0;\n    lftValue = 0;\n    rgtValue = 0;\n  };\n  useEffect(function () {\n    if (!joyManager && enableJoystick) {\n      joyManager = nipplejs.create(NIPPLEJS_OPTIONS);\n      joyManager[\"0\"].on(\"move\", handleMove);\n      joyManager[\"0\"].on(\"end\", handleEnd);\n    }\n    return function () {\n      if (joyManager) {\n        joyManager[\"0\"].off(\"move\", handleMove);\n        joyManager[\"0\"].off(\"end\", handleEnd);\n      }\n    };\n  }, [enableJoystick]);\n}\n_s2(useJoystick, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nvar SPEED = 5;\nvar direction = new THREE.Vector3();\nvar frontVector = new THREE.Vector3();\nvar sideVector = new THREE.Vector3();\nvar speed = new THREE.Vector3();\nvar FPSControls = function FPSControls(_ref3) {\n  _s3();\n  var enableJoystick = _ref3.enableJoystick,\n    enableKeyboard = _ref3.enableKeyboard,\n    _ref3$orbitProps = _ref3.orbitProps,\n    orbitProps = _ref3$orbitProps === void 0 ? {} : _ref3$orbitProps,\n    _ref3$camProps = _ref3.camProps,\n    camProps = _ref3$camProps === void 0 ? {} : _ref3$camProps,\n    _ref3$mult = _ref3.mult,\n    mult = _ref3$mult === void 0 ? 0.1 : _ref3$mult;\n  var orbitRef = useRef();\n  var camRef = useRef();\n  var meshRef = useRef();\n  var _useBox = useBox(function () {\n      return {\n        mass: 1,\n        type: \"Dynamic\",\n        position: [0, 4, 0]\n      };\n    }),\n    _useBox2 = _slicedToArray(_useBox, 2),\n    ref = _useBox2[0],\n    api = _useBox2[1];\n  var velocity = useRef([0, 0, 0]);\n  useEffect(function () {\n    return api.velocity.subscribe(function (v) {\n      return velocity.current = v;\n    });\n  }, []);\n  var updatePlayer = useCallback(function () {\n    var mesh = meshRef.current;\n    var controls = orbitRef.current;\n    var camera = camRef.current;\n\n    // move the player\n    var angle = controls.getAzimuthalAngle();\n    var meshPosPre = mesh.position;\n    if (fwdValue > 0) {\n      tempVector.set(0, 0, -fwdValue).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(tempVector, mult);\n    }\n    if (bkdValue > 0) {\n      tempVector.set(0, 0, bkdValue).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(tempVector, mult);\n    }\n    if (lftValue > 0) {\n      tempVector.set(-lftValue, 0, 0).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(tempVector, mult);\n    }\n    if (rgtValue > 0) {\n      tempVector.set(rgtValue, 0, 0).applyAxisAngle(upVector, angle);\n      mesh.position.addScaledVector(tempVector, mult);\n    }\n    mesh.updateMatrixWorld();\n    var meshPosPost = mesh.position;\n\n    // reposition camera\n    camera.position.sub(controls.target);\n    controls.target.copy(mesh.position);\n    camera.position.add(mesh.position);\n\n    // Physics\n    ref.current.getWorldPosition(mesh.position);\n    frontVector.set(0, 0, Number(meshPosPost.z));\n    sideVector.set(Number(meshPosPost.x), 0, 0);\n    direction.subVectors(frontVector, sideVector).normalize().applyEuler(camera.rotation);\n    api.velocity.set(direction.x, velocity.current[1], direction.z);\n  }, [meshRef, orbitRef, camRef, mult]);\n  useFrame(function (state) {\n    updatePlayer();\n  });\n  useJoystick({\n    enableJoystick: enableJoystick\n  });\n  useKeyboard({\n    enableKeyboard: enableKeyboard\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(OrbitControls, _objectSpread(_objectSpread({\n      autoRotate: false,\n      enableDamping: true,\n      enableZoom: false,\n      enablePan: false,\n      autoRotateSpeed: 0,\n      rotateSpeed: 0.4,\n      dampingFactor: 0.05\n    }, orbitProps), {}, {\n      ref: orbitRef\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 8\n    }, _this), /*#__PURE__*/_jsxDEV(PerspectiveCamera, _objectSpread(_objectSpread({}, camProps), {}, {\n      ref: camRef\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 8\n    }, _this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      position: orbitProps.target || [0, 0, 0],\n      visible: true,\n      ref: meshRef,\n      children: [/*#__PURE__*/_jsxDEV(\"boxGeometry\", {\n        args: [2, 2, 2]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 10\n      }, _this), /*#__PURE__*/_jsxDEV(\"meshBasicMaterial\", {\n        color: \"mediumpurple\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 10\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 8\n    }, _this)]\n  }, void 0, true);\n};\n_s3(FPSControls, \"umXJpaTG1XKV/OmKghP2tPwUrEc=\", false, function () {\n  return [useBox, useFrame, useJoystick, useKeyboard];\n});\n_c = FPSControls;\nexport default FPSControls;\nvar _c;\n$RefreshReg$(_c, \"FPSControls\");","map":{"version":3,"names":["OrbitControls","PerspectiveCamera","useFrame","React","useCallback","useEffect","useRef","useState","useLayoutEffect","Vector3","nipplejs","useBox","THREE","fwdValue","bkdValue","rgtValue","lftValue","joyManager","tempVector","upVector","NIPPLEJS_OPTIONS","zone","document","getElementById","size","maxNumberOfNipples","mode","restJoystick","shape","position","top","left","dynamicPage","handleMove","evt","data","forward","vector","y","turn","x","Math","abs","useKeyboard","enableKeyboard","onKeyDown","event","code","onKeyUp","addEventListener","removeEventListener","useJoystick","enableJoystick","handleEnd","create","on","off","SPEED","direction","frontVector","sideVector","speed","FPSControls","orbitProps","camProps","mult","orbitRef","camRef","meshRef","mass","type","ref","api","velocity","subscribe","v","current","updatePlayer","mesh","controls","camera","angle","getAzimuthalAngle","meshPosPre","set","applyAxisAngle","addScaledVector","updateMatrixWorld","meshPosPost","sub","target","copy","add","getWorldPosition","Number","z","subVectors","normalize","applyEuler","rotation","state"],"sources":["/run/media/private/jack/Media/Projects/GoldenLeaf/LibraryR3F/src/components/FPSControls.jsx"],"sourcesContent":["/**\n * Based on https://codepen.io/ogames/pen/rNmYpdo\n * - refactored to use fiber + drei semantics and compatible with @react-three/fiber\n * - added keyboard listener\n * - adjustment for fps\n */\n\n import { OrbitControls, PerspectiveCamera } from \"@react-three/drei\";\n import { useFrame } from \"@react-three/fiber\";\n import React, { useCallback, useEffect, useRef, useState, useLayoutEffect } from \"react\";\n import { Vector3 } from \"three\";\n import nipplejs from \"nipplejs\";\n import { useBox } from \"@react-three/cannon\"\n import * as THREE from 'three'\n\n let fwdValue = 0;\n let bkdValue = 0;\n let rgtValue = 0;\n let lftValue = 0;\n let joyManager;\n const tempVector = new Vector3();\n const upVector = new Vector3(0, 1, 0);\n\n\n\n const NIPPLEJS_OPTIONS = {\n   zone: document.getElementById(\"joystickWrapper1\"),\n   size: 120,\n   maxNumberOfNipples: 1,\n   mode: \"static\",\n   restJoystick: true,\n   shape: \"circle\",\n   position: { top: \"60px\", left: \"60px\" },\n   dynamicPage: false\n };\n\n const handleMove = (evt, data) => {\n   const forward = data.vector.y;\n   const turn = data.vector.x;\n\n\n if (forward > 0) {\n   fwdValue = Math.abs(forward);\n   bkdValue = 0;\n } else if (forward < 0) {\n   fwdValue = 0;\n   bkdValue = Math.abs(forward);\n }\n\n if (turn > 0) {\n   lftValue = 0;\n   rgtValue = Math.abs(turn);\n } else if (turn < 0) {\n   lftValue = Math.abs(turn);\n   rgtValue = 0;\n }\n };\n\n\n function useKeyboard({ enableKeyboard }) {\n   const onKeyDown = (event) => {\n     switch (event.code) {\n       case \"ArrowUp\":\n       case \"KeyW\":\n         handleMove({}, { vector: { y: 1 } });\n         break;\n\n       case \"ArrowLeft\":\n       case \"KeyA\":\n         handleMove({}, { vector: { x: -1 } });\n         break;\n\n       case \"ArrowDown\":\n       case \"KeyS\":\n         handleMove({}, { vector: { y: -1 } });\n         break;\n\n       case \"ArrowRight\":\n       case \"KeyD\":\n         handleMove({}, { vector: { x: 1 } });\n         break;\n       default:\n         break;\n     }\n   };\n\n   const onKeyUp = (event) => {\n     switch (event.code) {\n       case \"ArrowUp\":\n       case \"KeyW\":\n         fwdValue = 0;\n         break;\n\n       case \"ArrowLeft\":\n       case \"KeyA\":\n         lftValue = 0;\n         break;\n\n       case \"ArrowDown\":\n       case \"KeyS\":\n         bkdValue = 0;\n         break;\n\n       case \"ArrowRight\":\n       case \"KeyD\":\n         rgtValue = 0;\n         break;\n       default:\n         break;\n     }\n   };\n\n   useEffect(() => {\n     if (enableKeyboard) {\n       document.addEventListener(\"keydown\", onKeyDown);\n       document.addEventListener(\"keyup\", onKeyUp);\n     }\n\n     return () => {\n       document.removeEventListener(\"keydown\", onKeyDown);\n       document.removeEventListener(\"keyup\", onKeyUp);\n     };\n   }, [enableKeyboard]);\n }\n\n function useJoystick({ enableJoystick }) {\n   const handleEnd = () => {\n     bkdValue = 0;\n     fwdValue = 0;\n     lftValue = 0;\n     rgtValue = 0;\n   };\n\n   useEffect(() => {\n     if (!joyManager && enableJoystick) {\n       joyManager = nipplejs.create(NIPPLEJS_OPTIONS);\n       joyManager[\"0\"].on(\"move\", handleMove);\n       joyManager[\"0\"].on(\"end\", handleEnd);\n     }\n\n     return () => {\n       if (joyManager) {\n         joyManager[\"0\"].off(\"move\", handleMove);\n         joyManager[\"0\"].off(\"end\", handleEnd);\n       }\n     };\n   }, [enableJoystick]);\n }\n const SPEED = 5\n\n const direction = new THREE.Vector3()\n const frontVector = new THREE.Vector3()\n const sideVector = new THREE.Vector3()\n const speed = new THREE.Vector3()\n\n const FPSControls = ({\n   enableJoystick,\n   enableKeyboard,\n   orbitProps = {},\n   camProps = {},\n   mult = 0.1\n }) => {\n   const orbitRef = useRef();\n   const camRef = useRef();\n   const meshRef = useRef();\n\n   const [ref, api] = useBox(() => ({ mass: 1, type: \"Dynamic\", position: [0, 4, 0], }))\n   const velocity = useRef([0, 0, 0])\n   useEffect(() => api.velocity.subscribe((v) => (velocity.current = v)), [])\n\n\n   const updatePlayer = useCallback(() => {\n     const mesh = meshRef.current;\n     const controls = orbitRef.current;\n     const camera = camRef.current;\n\n     // move the player\n     const angle = controls.getAzimuthalAngle();\n\n     let meshPosPre = mesh.position\n\n     if (fwdValue > 0) {\n       tempVector.set(0, 0, -fwdValue).applyAxisAngle(upVector, angle);\n       mesh.position.addScaledVector(tempVector, mult);\n     }\n\n     if (bkdValue > 0) {\n       tempVector.set(0, 0, bkdValue).applyAxisAngle(upVector, angle);\n       mesh.position.addScaledVector(tempVector, mult);\n     }\n\n     if (lftValue > 0) {\n       tempVector.set(-lftValue, 0, 0).applyAxisAngle(upVector, angle);\n       mesh.position.addScaledVector(tempVector, mult);\n     }\n\n     if (rgtValue > 0) {\n       tempVector.set(rgtValue, 0, 0).applyAxisAngle(upVector, angle);\n       mesh.position.addScaledVector(tempVector, mult);\n\n     }\n\n     mesh.updateMatrixWorld();\n     let meshPosPost = mesh.position\n\n     // reposition camera\n     camera.position.sub(controls.target);\n     controls.target.copy(mesh.position);\n     camera.position.add(mesh.position);\n\n     // Physics\n     ref.current.getWorldPosition(mesh.position)\n     frontVector.set(0, 0, Number(meshPosPost.z))\n     sideVector.set(Number(meshPosPost.x), 0, 0)\n     direction.subVectors(frontVector, sideVector).normalize().applyEuler(camera.rotation)\n\n     api.velocity.set(direction.x, velocity.current[1], direction.z)\n\n   }, [meshRef, orbitRef, camRef, mult]);\n\n   useFrame((state) => {\n     updatePlayer();\n\n   });\n\n   useJoystick({ enableJoystick });\n   useKeyboard({ enableKeyboard });\n\n\n\n   return (\n     <>\n       <OrbitControls\n         autoRotate={false}\n         enableDamping={true}\n         enableZoom={false}\n         enablePan={false}\n         autoRotateSpeed={0}\n         rotateSpeed={0.4}\n         dampingFactor={0.05}\n         {...orbitProps}\n         ref={orbitRef}\n       />\n       <PerspectiveCamera {...camProps} ref={camRef} />\n\n\n\n\n\n       <mesh\n         position={orbitProps.target || [0, 0, 0]}\n         visible={true}\n         ref={meshRef}\n       >\n         {/* <CuboidCollider args={[2, 1, 2]} /> */}\n         <boxGeometry args={[2, 2, 2]}/>\n         <meshBasicMaterial color=\"mediumpurple\" />\n       </mesh>\n\n\n\n\n\n\n\n     </>\n   );\n };\n\n export default FPSControls;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}